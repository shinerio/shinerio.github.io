---
title: 阿里一面
date: 2019-08-31
categories:
- 面经
tags:
- 面经
password: loveshinerio   
abstract: 阿里一面
message: 阿里一面
---

## 进程与线程区别

进程和线程是显示并发的两种方式。进程是资源分配的基本单位，一个进程可以有多个线程，线程可以访问率属于进程的资源。进程之间不会互相影响，鲁棒性高，一个线程的崩溃会导致整个线程的崩溃。线程是基本调度的单位。进程间的切换需要的系统开销比较大（资源的分配和回收），线程切换开销比较小。进程间通信需要使用IPC，线程间可以通过直接读写同一进程中的数据进行通信。

## 多线程的意义

对于单核cpu来说，单从性能上来讲，没有任何好处，其主要作用是处理阻塞，多线程可以并发交替地执行多个任务，如果程序中的某个任务因为一些资源或者I/O问题阻塞而不能执行，如果没有多线程，整个程序都停下来了，这对于用户操作系统这类的交互进程是致命的。对于多核CPU来说，可以让一个进程通过多线程的调度使用不同的CPU处理器来并行计算，大大降低计算时间，提高效率。

## TCP

- 传输控制协议TCP（Transmission Control Protocol）是**面向连接**的，提供**可靠交付**，有**流量控制**，**拥塞控制**，提供**全双工通信**，面向字节流，TCP是**点对点**的

- 用户数据报协议UDP（User Datagram Protocol）是**面向无连接**的，**尽最大可能交付**，没有拥塞控制，面向报文，支持一对一，一对多，多对一，多对多的交互通信。

TCP的可靠性主要通过三个方面来确定

- 差错控制
  - 确认与超时重传，丢弃重复报文，重传丢失报文
  - 校验和，检测报文是否缺失损坏
- 流量控制
  - TCP通过调节发送方与接收方的窗口大小来控制传输速率
- 拥塞控制
  - 慢开始与拥塞避免
  - 快重传与快恢复

#### 三次握手

首先是保证双方都能正常接发消息

第一次：服务器确认客户端发送消息正常

第二次：客户端确认服务器接收、发送消息正常

第三次：服务器确定客户端接收消息正常

第三次握手是为了防止失效的连接请求到达服务器，让服务器错误打开连接。如果没有第三次握手，那么服务器有可能接收到的一个客户端很久之前发出的失效请求连接，而没有第三次握手（客户端反馈），那么服务器会打开一个失效的连接，白白浪费资源

#### 四次挥手

客户端发送了 FIN 连接释放报文之后，服务器收到了这个报文，就进入了 CLOSE-WAIT 状态。这个状态是为了让服务器端发送还未传送完毕的数据，传送完毕之后，服务器会发送 FIN 连接释放报文。

客户端接收到服务器端的FIN报文后进入TIME_WAIT，此时并不是直接进入 CLOSED 状态，还需要等待一个时间计时器设置的时间 2MSL。这么做有两个理由：

- 确保最后一个确认报文能够到达。如果 B 没收到 A 发送来的确认报文，那么就会重新发送连接释放请求报文，A 等待一段时间就是为了处理这种情况的发生。
- 等待一段时间是为了让本连接持续时间内所产生的所有报文都从网络中消失，使得下一个新的连接不会出现旧的连接请求报文。

## JVM内存模型理解

- 主内存与工作内存，所有变量都存储在主内存中，每个线程有自己的工作内存，线程对变量的操作都必须在工作内存里完成，线程间的变量值传递需要通过主内存完成
- 8种原子性操作，lock,unlock,read,load,assign,use,save,write，以及相应的规则
- volatile保证可见性以及禁止指令重排（JDK1.5）
- 原子性、可见性、有序性
- 先行发生原则
