<section class="todo-section fade-in">
    <div class="todo-header">
        <h1 class="todo-title">TODO Board</h1>
        <div class="todo-auth" id="todo-auth">
            <button class="todo-btn todo-btn-primary" id="todo-login-btn">Sign in with GitHub</button>
        </div>
    </div>

    <div class="todo-toolbar" id="todo-toolbar" style="display:none;">
        <button class="todo-btn todo-btn-accent" id="todo-add-btn">+ Add Item</button>
    </div>

    <div class="todo-loading" id="todo-loading">
        <div class="todo-spinner"></div>
        <p>Loading board...</p>
    </div>

    <div class="todo-error" id="todo-error" style="display:none;">
        <p id="todo-error-msg"></p>
        <button class="todo-btn todo-btn-small" id="todo-retry-btn">Retry</button>
    </div>

    <div class="todo-board" id="todo-board"></div>

    <!-- Device Flow Modal -->
    <div class="todo-modal" id="todo-device-modal" style="display:none;">
        <div class="todo-modal-content">
            <h2>Sign in to GitHub</h2>
            <p>Enter this code on GitHub:</p>
            <div class="todo-device-code" id="todo-device-code"></div>
            <a class="todo-btn todo-btn-primary" id="todo-device-link" href="https://github.com/login/device" target="_blank" rel="noopener noreferrer">Open GitHub</a>
            <p class="todo-device-status" id="todo-device-status">Waiting for authorization...</p>
            <button class="todo-btn todo-btn-small" id="todo-device-cancel">Cancel</button>
        </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div class="todo-modal" id="todo-item-modal" style="display:none;">
        <div class="todo-modal-content">
            <h2 id="todo-item-modal-title">Add Item</h2>
            <form id="todo-item-form">
                <div class="todo-form-group">
                    <label for="todo-item-title">Title</label>
                    <input type="text" id="todo-item-title" class="todo-form-input" required>
                </div>
                <div class="todo-form-group">
                    <label for="todo-item-body">Description</label>
                    <textarea id="todo-item-body" class="todo-form-textarea" rows="4"></textarea>
                </div>
                <div class="todo-form-group" id="todo-status-group" style="display:none;">
                    <label for="todo-item-status">Status</label>
                    <select id="todo-item-status" class="todo-form-select"></select>
                </div>
                <div class="todo-form-actions">
                    <button type="submit" class="todo-btn todo-btn-primary">Save</button>
                    <button type="button" class="todo-btn todo-btn-small" id="todo-item-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script type="application/json" id="todo-config">
    {
        "githubUsername": "{{githubUsername}}",
        "projectNumber": {{projectNumber}},
        "todoRepo": "{{todoRepo}}",
        "oauthClientId": "{{oauthClientId}}",
        "oauthProxyUrl": "{{oauthProxyUrl}}"
    }
    </script>
</section>
