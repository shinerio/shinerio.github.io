应用程序负载均衡器（ALB）、网络负载均衡器（NLB）和网关负载均衡器（GLB）是云中使用的三类负载均衡器。

为了重定向应用程序流量
- ALB 会检查请求的内容，例如 HTTP 标头或 SSL 会话 ID
- NLB 会检查 IP 地址和其他网络信息，以最佳方式重定向流量
- GLB 充当透明的网络网关（所有流量的单一入口和出口点），可在根据需求扩展虚拟设备的同时分配流量。

# 1. ALB（7层）
ALB 将传入流量分配到多个目标，例如 EC2 实例。例如，电子商务应用程序具有产品目录、购物车和结账功能：
1. ALB 会将浏览产品的请求发送给包含图像和视频但不需要保持连接的服务器
2. ALB会将购物车请求发送给保持多个客户端连接并长时间保存购物车数据的服务器
一个LB包含多个监听器，一个监听器监听一个指定协议、IP、端口的服务，可以在监听器下创建规则，决定将流量路由到哪个后端服务器组
- **侦听器**：用于监听来自客户端的连接请求
- **侦听器规则**： 确定负载均衡器如何将请求路由到目标
- **目标组**：将注册目标分组，可以定义规则，将常见流量路由到整个组。例如，可以为一般请求创建目标组，为应用程序的微服务请求创建其他目标组。
![image.png](https://shinerio.oss-cn-beijing.aliyuncs.com/blog_images20250109221214317.png)

# 2. NLB（4层）
NLB 根据网络条件分配流量。例如，如果您有多个包含重复数据的数据库服务器，则 NLB 会根据预先确定的服务器IP地址或服务器可用性来路由流量。NLB监控其注册目标的运行状况，并仅将流量路由到运行状况良好的目标。负载均衡器收到连接请求后，它会根据默认规则从后端服务器组中选择一个后端服务器。NLB会尝试和选中的后端服务器建立TCP连接，目的端口为监听器上配置的端口。在TCP连接的生命周期内，每个TCP连接都只会被路由到单个特定目标。同样，UDP流在整个生命周期内也始终会被路由到单个目标。

# 3. GWLB
借助全局负载均衡器（GWLB），您能够部署、管理并扩展诸如入侵检测与防范系统、防火墙以及深度数据包检测系统等虚拟设备。它为所有设备流量创建单一的入口和出口点，并根据需求对虚拟设备进行扩展。您还可以利用它跨虚拟私有云（VPC）边界交换流量。

在全局负载均衡器中，您可通过路由表制定规则。根据您所设置的规则，它会选择不同的目标组来转发流量。它接收IP数据包，并将流量转发到特定的目标组。

# 4. 选择逻辑
当需要灵活的应用程序级流量管理和路由时，ALB 是一个不错的选择。这是微服务、容器化环境和Web应用程序的理想之选。它的功能（例如 SSL 终止、会话保持和基于URL、METHOD、请求头等的路由）使其能够为复杂的路由场景提供帮助。 

NLB最适合实现高性能、低延迟和可扩展的**网络级均衡**。在传输层分配流量的应用程序使用NLB，尤其是考虑到其可靠性。游戏系统、媒体流式传输服务和主要IoT系统都使用 NLB。 

当您在网络网关级别上进行均衡时，GLB 是理想的选择。例如，如果您管理云和本地环境之间或跨不同区域的流量，GLB 就能很好地发挥作用。由于它结合了OSI第3层和第4层均衡功能，因此可以在不同的区域和网络之间路由流量。由于它支持基于IP的路由，它可以在虚拟网关之间分配流量，因此可以提供高可扩展性和可用性。
GLB一句话总结：可以虚拟网关设备做负载均衡


# 5. 参考连接
https://aws.amazon.com/cn/blogs/china/utilize-transit-gateway-and-gateway-load-balancer-to-implement-centralized-inspection-of-east-west-and-north-south-traffic/