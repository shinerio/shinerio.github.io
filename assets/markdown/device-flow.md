GitHub的OAuth **Device Flow**（设备流，遵循 RFC 8628 标准）是一种专门为**输入受限**或**无浏览器环境**设计的授权方式（有时候一些简单个人项目可能也懒得开发独立的登录页面）。简单来说，如果你开发的是一个运行在服务器黑窗口（CLI）或智能电视上的程序，用户没法直接在那个屏幕上输入 GitHub 账号密码或点击“授权”按钮，这时就需要用到 Device Flow。
# 1. 核心功能与适用场景
传统的 OAuth 通常需要浏览器重定向，而 Device Flow 解决了以下场景的授权问题：
- **CLI 工具：** 如 `gh` (GitHub CLI)、Git 凭据管理器。
- **无头服务器 (Headless)：** 只有 SSH 连接，没有图形界面。
- **物联网设备：** 如智能电视、智能音箱等。
# 2. 工作流程（六步走）
1. **请求代码：** 你的应用向 GitHub 发送一个请求（包含 `client_id`），表示“我想让用户授权我”。
2. **获取响应：** GitHub 返回三个关键数据：
    - `device_code`：应用自己留着，用来“换票”。
    - `user_code`：给用户看的（通常是 8 位字符，如 `ABCD-1234`）。
    - `verification_uri`：告诉用户去哪里输入代码（通常是 `https://github.com/login/device`）。
3. **展示给用户：** 应用在终端或屏幕上打印出网址和验证码，提示用户：“请在手机或电脑浏览器打开该网址并输入此代码”。
4. **开始轮询 (Polling)：** 应用每隔几秒钟询问一次 GitHub：“用户输完代码了吗？”
5. **用户授权：** 用户在另一台设备（手机或 PC）上打开网址，输入代码并点击“授权”。
6. **获得令牌：** GitHub 发现用户授权成功，在应用下一次询问时返回 `access_token`。