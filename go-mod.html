<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Mod - Shinerio's Blog</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body class="article-page" id="theme-body">
    <div class="page-wrapper">
        <header class="page-header">
            <div class="container">
                <nav class="page-nav">
                    <div class="nav-links">
                        <a href="index.html" class="nav-link ">Home</a>
                        <a href="articles.html" class="nav-link ">Articles</a>
                        <a href="search.html" class="nav-link ">Search</a>
                    </div>
                    <div class="theme-toggle-container">
                        <button id="theme-toggle" aria-label="Toggle dark mode" class="theme-toggle-btn">
                            <span class="sun-icon">â˜€ï¸</span>
                            <span class="moon-icon">ğŸŒ™</span>
                        </button>
                    </div>
                </nav>
            </div>
        </header>
        <main class="page-main">
            <div class="container">
                <article>
    <header>
        <h1>Go Mod</h1>
        <time datetime="2026-01-03T13:04:29.131Z">2026å¹´1æœˆ3æ—¥</time>
        <div class="tags">
            
        </div>
    </header>
    <section class="content">
        {<p>ä» Go 1.11å¼€å§‹ï¼ŒGoå¼•å…¥äº†Go Modulesä½œä¸ºå®˜æ–¹çš„ä¾èµ–ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚åœ¨Go Modulesæ¨¡å¼ä¸‹ï¼Œä¾èµ–é¡¹ä¼šè¢«ä¸‹è½½åˆ°<code>$GOPATH/pkg/mod</code>ç›®å½•ä¸‹ï¼Œ<code>go install</code>å‘½ä»¤é»˜è®¤ä¼šå°†å¯æ‰§è¡Œæ–‡ä»¶å®‰è£…åˆ°<code>$GOPATH/bin</code>ç›®å½•ä¸‹ã€‚<code>go.mod</code>æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç”¨äºè®°å½•é¡¹ç›®çš„æ¨¡å—ä¿¡æ¯å’Œä¾èµ–é¡¹åŠå…¶ç‰ˆæœ¬ï¼Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­å¦‚ä¸‹ï¼š</p>
<pre><code class="language-go">module github.com/shinerio/cusmodule
go 1.16
require (
    github.com/cenk/backoff v2.2.1+incompatible
    github.com/coreos/bbolt v1.3.3
    github.com/edwingeng/doublejump v0.0.0-20200330080233-e4ea8bd1cbed
    github.com/stretchr/objx v0.3.0 // indirect
    github.com/stretchr/testify v1.7.0
    go.etcd.io/bbolt v1.3.6 // indirect
    go.etcd.io/etcd/client/v2 v2.305.0-rc.1
    go.etcd.io/etcd/client/v3 v3.5.0-rc.1
    golang.org/x/net v0.0.0-20210610132358-84b48f89b13b // indirect
    golang.org/x/sys v0.0.0-20210611083646-a4fc73990273 // indirect
)
exclude (
    go.etcd.io/etcd/client/v2 v2.305.0-rc.0
    go.etcd.io/etcd/client/v3 v3.5.0-rc.0
)
retract (
    v1.0.0 // åºŸå¼ƒçš„ç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨v1.1.0
)
</code></pre>
<h1>1. go modå‘½ä»¤</h1>
<pre><code>download    download modules to local cache
edit        edit go.mod from tools or scripts
graph       print module requirement graph
init        initialize new module in current directory
tidy        add missing and remove unused modules
vendor      make vendored copy of dependencies
verify      verify dependencies have expected content
why         explain why packages or modules are needed
</code></pre>
<h1>2. module path</h1>
<p>go.modçš„ç¬¬ä¸€è¡Œæ˜¯module path, ä¸€èˆ¬é‡‡ç”¨ä»“åº“+module nameçš„æ–¹å¼å®šä¹‰ã€‚è¿™æ ·æˆ‘ä»¬è·å–ä¸€ä¸ªmoduleçš„æ—¶å€™ï¼Œå°±å¯ä»¥åˆ°å®ƒçš„ä»“åº“ä¸­å»æŸ¥è¯¢ï¼Œæˆ–è€…è®©go proxyåˆ°ä»“åº“ä¸­å»æŸ¥è¯¢ã€‚</p>
<pre><code class="language-shell">module github.com/shinerio/cusmodule
</code></pre>
<p>å¦‚æœä½ çš„ç‰ˆæœ¬å·²ç»å¤§äºç­‰äº2.0.0ï¼ŒæŒ‰ç…§Goçš„è§„èŒƒï¼Œä½ åº”è¯¥åŠ ä¸Šmajorçš„åç¼€ï¼Œmodule pathæ”¹æˆä¸‹é¢çš„æ–¹å¼:</p>
<pre><code class="language-shell">module github.com/shinerio/cusmodule/v2
module github.com/shinerio/cusmodule/v3
</code></pre>
<p>è€Œä¸”å¼•ç”¨ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿè¦åŠ ä¸Š<code>v2</code>ã€<code>v3</code>ã€<code>vx</code>åç¼€ï¼Œä»¥ä¾¿å’Œå…¶å®ƒmajorç‰ˆæœ¬è¿›è¡ŒåŒºåˆ†ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„çº¦å®šï¼Œå¸¦æ¥çš„å¥½å¤„æ˜¯ä½ ä¸€ä¸ªé¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨ä¾èµ–åº“çš„ä¸åŒçš„majorç‰ˆæœ¬ï¼Œå®ƒä»¬å¯ä»¥å…±å­˜ã€‚</p>
<h1>3. go directive</h1>
<p>ç¬¬äºŒè¡Œæ˜¯go directiveã€‚æ ¼å¼æ˜¯Â <code>go 1.xx</code>ï¼Œå®ƒå¹¶ä¸æ˜¯æŒ‡ä½ å½“å‰ä½¿ç”¨çš„Goç‰ˆæœ¬ï¼Œè€Œæ˜¯æŒ‡åä½ çš„ä»£ç æ‰€éœ€è¦çš„Goçš„æœ€ä½ç‰ˆæœ¬ã€‚å› ä¸ºGoçš„æ ‡å‡†åº“ä¹Ÿæœ‰æ‰€å˜åŒ–ï¼Œä¸€äº›æ–°çš„APIä¹Ÿè¢«å¢åŠ è¿›æ¥ï¼Œå¦‚æœä½ çš„ä»£ç ç”¨åˆ°äº†è¿™äº›æ–°çš„APIï¼Œä½ å¯èƒ½éœ€è¦æŒ‡åå®ƒä¾èµ–çš„goç‰ˆæœ¬ã€‚</p>
<h1>4. require</h1>
<p>requireæ®µä¸­åˆ—å‡ºäº†é¡¹ç›®æ‰€éœ€è¦çš„å„ä¸ªä¾èµ–åº“ä»¥åŠå®ƒä»¬çš„ç‰ˆæœ¬ï¼Œé™¤äº†æ­£è§„çš„<code>v1.3.0</code>è¿™æ ·çš„ç‰ˆæœ¬å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„ç‰ˆæœ¬å’Œæ³¨é‡Šã€‚</p>
<h2>4.1. indirectæ³¨é‡Š</h2>
<pre><code class="language-go">    golang.org/x/net v0.0.0-20210610132358-84b48f89b13b // indirect
    golang.org/x/sys v0.0.0-20210611083646-a4fc73990273 // indirect
</code></pre>
<p>æœ‰äº›åº“åé¢åŠ äº†<code>indirect</code>åç¼€ï¼Œä»£è¡¨é—´æ¥çš„ä½¿ç”¨äº†è¿™ä¸ªåº“ï¼Œä½†æ˜¯åˆæ²¡æœ‰è¢«åˆ—åˆ°æŸä¸ªgo.modä¸­ã€‚ä¸‹é¢çš„æƒ…å†µä¹‹ä¸€å°±ä¼šå¯¹è¿™ä¸ªåº“åŠ indirectåç¼€ï¼š</p>
<ul>
<li>å½“å‰é¡¹ç›®ä¾èµ–Aï¼Œä½†æ˜¯Açš„go.modé—æ¼äº†B,é‚£ä¹ˆå°±ä¼šåœ¨å½“å‰é¡¹ç›®çš„go.modä¸­è¡¥å……Bï¼ŒåŠ indirectæ³¨é‡Š</li>
<li>å½“å‰é¡¹ç›®ä¾èµ–Aï¼Œä½†æ˜¯Aæ²¡æœ‰go.modï¼ŒåŒæ ·å°±ä¼šåœ¨å½“å‰é¡¹ç›®çš„go.modä¸­è¡¥å……Bï¼ŒåŠ indirectæ³¨é‡Š</li>
<li>å½“å‰é¡¹ç›®ä¾èµ–Aï¼ŒAåˆä¾èµ–Bï¼Œå½“å¯¹Aé™çº§çš„æ—¶å€™ï¼Œé™çº§çš„Aä¸å†ä¾èµ–Bï¼Œè¿™ä¸ªæ—¶å€™Bå°±æ ‡è®°indirectæ³¨é‡Š</li>
</ul>
<h2>4.2. incompatible</h2>
<p>æœ‰äº›åº“åé¢åŠ äº†incompatibleåç¼€ï¼Œä½†æ˜¯ä½ å¦‚æœçœ‹è¿™äº›é¡¹ç›®ï¼Œå®ƒä»¬åªæ˜¯å‘å¸ƒäº†v2.2.1çš„tagï¼Œå¹¶æ²¡æœ‰<code>+incompatible</code>åç¼€ã€‚</p>
<pre><code class="language-go">github.com/cenk/backoff v2.2.1+incompatible
</code></pre>
<p>è¿™äº›åº“é‡‡ç”¨äº†go.modçš„ç®¡ç†ï¼Œä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œè™½ç„¶è¿™äº›åº“çš„ç‰ˆmajorç‰ˆæœ¬å·²ç»å¤§äºç­‰äº2äº†ï¼Œä½†æ˜¯ä»–ä»¬çš„module pathä¸­ä¾ç„¶æ²¡æœ‰æ·»åŠ v2ã€v3è¿™æ ·çš„åç¼€ã€‚æ‰€ä»¥go moduleæŠŠå®ƒä»¬æ ‡è®°ä¸º<code>incompatible</code>çš„ï¼Œè™½ç„¶å¯ä»¥å¼•ç”¨ï¼Œä½†æ˜¯å®é™…å®ƒä»¬æ˜¯ä¸ç¬¦åˆè§„èŒƒçš„ã€‚</p>
<h1>5. exclude</h1>
<p>å¦‚æœä½ æƒ³åœ¨ä½ çš„é¡¹ç›®ä¸­è·³è¿‡æŸä¸ªä¾èµ–åº“çš„æŸä¸ªç‰ˆæœ¬ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ®µã€‚</p>
<pre><code class="language-go">exclude (
    go.etcd.io/etcd/client/v2 v2.305.0-rc.0
)
</code></pre>
<p>è¿™æ ·ï¼ŒGoåœ¨ç‰ˆæœ¬é€‰æ‹©çš„æ—¶å€™ï¼Œå°±ä¼šä¸»åŠ¨è·³è¿‡è¿™äº›ç‰ˆæœ¬ï¼Œæ¯”å¦‚ä½ ä½¿ç”¨<code>go get -u ......</code>æˆ–è€…<code>go get github.com/xxx/xxx@latest</code>ç­‰å‘½ä»¤æ—¶ï¼Œä¼šæ‰§è¡Œversion queryçš„åŠ¨ä½œï¼Œè¿™äº›ç‰ˆæœ¬ä¸åœ¨è€ƒè™‘çš„èŒƒå›´ä¹‹å†…ã€‚</p>
<h1>6. replace</h1>
<p>replaceä¹Ÿæ˜¯å¸¸ç”¨çš„ä¸€ä¸ªæ‰‹æ®µï¼Œç”¨æ¥è§£å†³ä¸€äº›é”™è¯¯çš„ä¾èµ–åº“çš„å¼•ç”¨æˆ–è€…è°ƒè¯•ä¾èµ–åº“ã€‚</p>
<pre><code class="language-go">replace github.com/coreos/bbolt =&gt; go.etcd.io/bbolt v1.3.3
replace github.com/panicthis/A v1.1.0 =&gt; github.com/panicthis/R v1.8.0
replace github.com/coreos/bbolt =&gt; ../R
</code></pre>
<p>æ¯”å¦‚etcd v3.3.xçš„ç‰ˆæœ¬ä¸­é”™è¯¯çš„ä½¿ç”¨äº†github.com/coreos/bboltä½œä¸ºbboltçš„module pathï¼Œå…¶å®è¿™ä¸ªåº“åœ¨å®ƒè‡ªå·±çš„go.modä¸­å£°æ˜çš„module pathæ˜¯go.etcd.io/bboltï¼Œåˆæ¯”å¦‚etcdä½¿ç”¨çš„grpcç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡replaceæ›¿æ¢æˆæ‰€éœ€çš„grpcç‰ˆæœ¬ã€‚</p>
<p>ç”šè‡³ä½ è§‰å¾—æŸä¸ªä¾èµ–åº“æœ‰é—®é¢˜ï¼Œè‡ªå·±forkåˆ°æœ¬åœ°åšä¿®æ”¹ï¼Œæƒ³è°ƒè¯•ä¸€ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥æ›¿æ¢æˆæœ¬åœ°çš„æ–‡ä»¶å¤¹ã€‚</p>
<p>replaceå¯ä»¥æ›¿æ¢æŸä¸ªåº“çš„æ‰€æœ‰ç‰ˆæœ¬åˆ°å¦ä¸€ä¸ªåº“çš„ç‰¹å®šç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢æŸä¸ªåº“çš„ç‰¹å®šç‰ˆæœ¬åˆ°å¦ä¸€ä¸ªåº“çš„ç‰¹å®šç‰ˆæœ¬ã€‚</p>
<h1>7. retract</h1>
<p>retractæ˜¯go 1.16ä¸­æ–°å¢åŠ çš„å†…å®¹ï¼Œå€Ÿç”¨å­¦æœ¯ç•ŒæœŸåˆŠæ’¤ç¨¿çš„æœ¯è¯­ï¼Œå®£å¸ƒæ’¤å›åº“çš„æŸä¸ªç‰ˆæœ¬ã€‚å¦‚æœä½ è¯¯å‘å¸ƒäº†æŸä¸ªç‰ˆæœ¬ï¼Œæˆ–è€…äº‹åå‘ç°æŸä¸ªç‰ˆæœ¬ä¸æˆç†Ÿï¼Œé‚£ä¹ˆä½ å¯ä»¥æ¨ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œåœ¨æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œå£°æ˜å‰é¢çš„æŸä¸ªç‰ˆæœ¬è¢«æ’¤å›ï¼Œæç¤ºå¤§å®¶éƒ½ä¸è¦ç”¨äº†ã€‚æ’¤å›çš„ç‰ˆæœ¬tagä¾ç„¶è¿˜å­˜åœ¨ï¼Œgo proxyä¹Ÿå­˜åœ¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½ å¦‚æœå¼ºåˆ¶ä½¿ç”¨ï¼Œè¿˜æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œå¦åˆ™è¿™äº›ç‰ˆæœ¬å°±ä¼šè¢«è·³è¿‡ã€‚å’Œexcludeçš„åŒºåˆ«æ˜¯retractæ˜¯è¿™ä¸ªåº“çš„ownerå®šä¹‰çš„ï¼Œ è€Œexcludeæ˜¯åº“çš„ä½¿ç”¨è€…åœ¨è‡ªå·±çš„go.modä¸­å®šä¹‰çš„ã€‚</p>
<h1>8. vendorç›®å½•</h1>
<p>Go è¿˜æ”¯æŒä½¿ç”¨Â <code>vendor</code>Â ç›®å½•æ¥ç®¡ç†ä¾èµ–ã€‚å¯ä»¥é€šè¿‡æ‰§è¡ŒÂ <code>go mod vendor</code>Â å‘½ä»¤ï¼Œå°†é¡¹ç›®æ‰€æœ‰ä¾èµ–é¡¹å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„Â <code>vendor</code>Â ç›®å½•ä¸­ã€‚å½“ä½¿ç”¨Â <code>-mod=vendor</code>Â æ ‡å¿—è¿›è¡Œç¼–è¯‘æ—¶ï¼ŒGo ä¼šä¼˜å…ˆä»Â <code>vendor</code>Â ç›®å½•ä¸­æŸ¥æ‰¾ä¾èµ–é¡¹ï¼Œè€Œéä»Â <code>$GOPATH/pkg/mod</code>Â æˆ–Â <code>GOMODCACHE</code>Â ä¸­æŸ¥æ‰¾ã€‚ç¤ºä¾‹å‘½ä»¤å¦‚ä¸‹</p>
<pre><code>go build -mod=vendor
</code></pre>
<h1>9. ref</h1>
<p><a href="https://colobu.com/2021/06/28/dive-into-go-module-1/">https://colobu.com/2021/06/28/dive-into-go-module-1/</a></p>
}
    </section>
</article>
            </div>
        </main>
        <footer class="page-footer">
            <div class="container">
                <p>&copy; 2026 Shinerio's Blog. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script>
        // Theme switching functionality
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.getElementById('theme-body');

            // Check for saved theme preference or respect OS preference
            const savedTheme = localStorage.getItem('theme');
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

            // Set initial theme
            if (savedTheme === 'dark' || (!savedTheme && prefersDarkScheme.matches)) {
                body.setAttribute('data-theme', 'dark');
            } else {
                body.removeAttribute('data-theme'); // light theme
            }

            // Toggle theme function
            function toggleTheme() {
                if (body.getAttribute('data-theme') === 'dark') {
                    body.removeAttribute('data-theme');
                    localStorage.setItem('theme', 'light');
                } else {
                    body.setAttribute('data-theme', 'dark');
                    localStorage.setItem('theme', 'dark');
                }
            }

            // Add event listener to theme toggle button
            themeToggle.addEventListener('click', toggleTheme);

            // Listen for OS theme changes
            prefersDarkScheme.addEventListener('change', function(e) {
                if (!localStorage.getItem('theme')) {
                    if (e.matches) {
                        body.setAttribute('data-theme', 'dark');
                    } else {
                        body.removeAttribute('data-theme');
                    }
                }
            });

            // Search functionality
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const searchResults = document.getElementById('search-results');
            const searchSuggestions = document.getElementById('search-suggestions');
            const searchTypeRadios = document.querySelectorAll('input[name="search-type"]');

            if (searchInput && searchButton) {
                let searchData = null;

                // Load search data
                async function loadSearchData() {
                    try {
                        const response = await fetch('./assets/js/search-data.json');
                        if (response.ok) {
                            searchData = await response.json();
                        } else {
                            console.error('Failed to load search data:', response.status);
                        }
                    } catch (error) {
                        console.error('Error loading search data:', error);
                    }
                }

                // Initialize search data
                loadSearchData();

                // Debounce function to limit search calls
                function debounce(func, wait) {
                    let timeout;
                    return function executedFunction(...args) {
                        const later = () => {
                            clearTimeout(timeout);
                            func(...args);
                        };
                        clearTimeout(timeout);
                        timeout = setTimeout(later, wait);
                    };
                }

                // Get selected search type
                function getSelectedSearchType() {
                    const selectedRadio = document.querySelector('input[name="search-type"]:checked');
                    return selectedRadio ? selectedRadio.value : 'all';
                }

                // Perform search
                function performSearch(query) {
                    if (!searchData || !query.trim()) {
                        searchResults.innerHTML = '';
                        searchSuggestions.innerHTML = '';
                        return;
                    }

                    const queryTerms = query.toLowerCase().split(/\s+/).filter(term => term.length > 0);
                    const searchType = getSelectedSearchType();

                    if (queryTerms.length === 0) {
                        searchResults.innerHTML = '';
                        return;
                    }

                    const results = [];

                    // Search through articles
                    searchData.articles.forEach(article => {
                        let score = 0;
                        let snippet = '';

                        // Get content based on search type
                        const lowerTitle = article.title.toLowerCase();
                        const lowerContent = article.content.toLowerCase();
                        const lowerTags = article.tags.join(' ').toLowerCase();

                        queryTerms.forEach(term => {
                            switch(searchType) {
                                case 'title':
                                    // Only title matches count
                                    if (lowerTitle.includes(term)) {
                                        score += 10;
                                    }
                                    break;
                                case 'content':
                                    // Only content matches count (fixed to exclude title matches)
                                    if (lowerContent.includes(term)) {
                                        score += 1;
                                    }
                                    break;
                                case 'all':
                                default:
                                    // Both title and content matches count
                                    if (lowerTitle.includes(term)) {
                                        score += 10;
                                    }
                                    if (lowerContent.includes(term)) {
                                        score += 1;
                                    }
                                    // Tag matches get medium-high score
                                    if (lowerTags.includes(term)) {
                                        score += 5;
                                    }
                                    break;
                            }
                        });

                        if (score > 0) {
                            // Generate snippet based on search type
                            let content = '';

                            if (searchType === 'title') {
                                // For title-only search, show title content
                                content = article.title.substring(0, 200);
                            } else if (searchType === 'content') {
                                // For content-only search, show content excerpt
                                content = article.content.substring(0, 200);
                            } else {
                                // For all search, show content with title as context
                                content = article.content.substring(0, 200);
                            }

                            // Find first occurrence of query term in content for snippet
                            queryTerms.forEach(term => {
                                let searchIn = content.toLowerCase();
                                if (searchType === 'title') {
                                    searchIn = lowerTitle;
                                } else if (searchType === 'content') {
                                    searchIn = lowerContent;
                                }

                                const index = searchIn.indexOf(term);
                                if (index !== -1) {
                                    // Expand snippet around the match
                                    let start, end;
                                    if (searchType === 'title') {
                                        start = Math.max(0, index - 15);
                                        end = Math.min(content.length, index + term.length + 35);
                                    } else {
                                        start = Math.max(0, index - 30);
                                        end = Math.min(content.length, index + term.length + 70);
                                    }

                                    content = (start > 0 ? '...' : '') +
                                              content.substring(start, end) +
                                              (end < (searchType === 'title' ? article.title.length : article.content.length) ? '...' : '');

                                    // Highlight the term in the snippet
                                    const searchContent = searchType === 'title' ? article.title : article.content;
                                    const adjustedIndex = searchType === 'title' ?
                                        Math.min(index, article.title.length - 1) :
                                        Math.min(index, article.content.length - 1);

                                    content = content.replace(
                                        new RegExp(`(${escapeRegExp(term)})`, 'gi'),
                                        '<mark>$1</mark>'
                                    );
                                }
                            });

                            results.push({
                                article: article,
                                score: score,
                                snippet: content
                            });
                        }
                    });

                    // Sort results by score
                    results.sort((a, b) => b.score - a.score);

                    // Display results
                    displaySearchResults(results);
                }

                // Display search results
                function displaySearchResults(results) {
                    if (results.length === 0) {
                        searchResults.innerHTML = '<p class="no-results">æœªæ‰¾åˆ°åŒ¹é…çš„æ–‡ç« </p>';
                        return;
                    }

                    const resultsHTML = results.map(result => `
                        <div class="search-result-item">
                            <h3 class="search-result-title">
                                <a href="./${result.article.slug}.html">${highlightQueryTerms(result.article.title, document.querySelector('#search-input').value)}</a>
                            </h3>
                            <div class="search-result-meta">
                                ${result.article.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
                            </div>
                            <p class="search-result-excerpt">${result.snippet}</p>
                        </div>
                    `).join('');

                    searchResults.innerHTML = resultsHTML;
                }

                // Highlight query terms in text
                function highlightQueryTerms(text, query) {
                    if (!query.trim()) return text;

                    const queryTerms = query.split(/\s+/).filter(term => term.length > 0);
                    let highlightedText = text;

                    queryTerms.forEach(term => {
                        const regex = new RegExp(`(${escapeRegExp(term)})`, 'gi');
                        highlightedText = highlightedText.replace(regex, '<mark>$1</mark>');
                    });

                    return highlightedText;
                }

                // Escape special regex characters
                function escapeRegExp(string) {
                    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                }

                // Event listener for search button
                searchButton.addEventListener('click', function() {
                    const query = searchInput.value;
                    performSearch(query);
                });

                // Event listener for Enter key
                searchInput.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        const query = searchInput.value;
                        performSearch(query);
                    }
                });

                // Add debounced input handler for live search (optional)
                const debouncedSearch = debounce(function() {
                    const query = searchInput.value;
                    performSearch(query);
                }, 300);

                searchInput.addEventListener('input', debouncedSearch);

                // Add event listeners for search type radios
                searchTypeRadios.forEach(radio => {
                    radio.addEventListener('change', function() {
                        const query = searchInput.value;
                        if (query.trim()) {
                            performSearch(query);
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>